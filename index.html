<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>TanhanJay&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="TanhanJay's Blog">
<meta property="og:url" content="tanhanjay.top/index.html">
<meta property="og:site_name" content="TanhanJay's Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TanhanJay's Blog">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="TanhanJay&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">TanhanJay&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">code and life</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="tanhanjay.top"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/28/hello-world/" class="article-date">
  <time datetime="2016-03-28T04:12:09.000Z" itemprop="datePublished">2016-03-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/28/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="tanhanjay.top/2016/03/28/hello-world/" data-id="cimblvnsj0006flz3d1zyhvfc" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-MDN-CSS入门教程学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/27/MDN-CSS入门教程学习笔记/" class="article-date">
  <time datetime="2016-03-26T16:00:00.000Z" itemprop="datePublished">2016-03-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/27/MDN-CSS入门教程学习笔记/">MDN-CSS入门教程学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>摘自MDN- <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Getting_started" target="_blank" rel="external">CSS入门教程</a></p>
</blockquote>
<h1 id="选择器-Selectors"><a href="#选择器-Selectors" class="headerlink" title="选择器(Selectors)"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Getting_started/Selectors" target="_blank" rel="external">选择器(Selectors)</a></h1><h3 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h3><h3 id="ID选择器"><a href="#ID选择器" class="headerlink" title="ID选择器"></a>ID选择器</h3><h3 id="伪类选择器（Pseudo-classes-selectors）"><a href="#伪类选择器（Pseudo-classes-selectors）" class="headerlink" title="伪类选择器（Pseudo-classes selectors）"></a>伪类选择器（Pseudo-classes selectors）</h3><p>CSS伪类（pseudo-class）是加在选择器后面的用来指定元素状态的关键字。比如，:hover会在鼠标悬停在选中元素上时应用相应的样式。</p>
<p>伪类和伪元素（Pseudo-elements）不仅可以让你为符合某种文档树结构的元素指定样式，还可以为某些外部条件的元素指定样式：浏览历史（比如是否访问过（:visited），内容状态（如:checked），鼠标位置(如:hover)）.</p>
<p>伪类列表</p>
<ul>
<li>:link</li>
<li>:visited</li>
<li>:active</li>
<li>:hover</li>
<li>:focus</li>
<li>:first-child</li>
<li>:nth-child</li>
<li>:nth-last-child</li>
<li>:nth-of-type</li>
<li>:first-of-type</li>
<li>:last-of-type</li>
<li>:empty</li>
<li>:target</li>
<li>:checked</li>
<li>:enabled</li>
<li>:disabled</li>
</ul>
<h2 id="基于关系的选择器"><a href="#基于关系的选择器" class="headerlink" title="基于关系的选择器"></a>基于关系的选择器</h2><table>
<thead>
<tr>
<th>选择器</th>
<th>选择的元素</th>
</tr>
</thead>
<tbody>
<tr>
<td>A E</td>
<td>任何是元素A的后代元素E（后代节点指A的子节点，子节点的子节点，以此类推）</td>
</tr>
<tr>
<td>A &gt; E</td>
<td>任何元素A的子元素</td>
</tr>
<tr>
<td>E:first-child</td>
<td>任何元素的第一个子元素E</td>
</tr>
<tr>
<td>B+E</td>
<td>任何元素B的下一个兄弟元素E</td>
</tr>
<tr>
<td>B~E</td>
<td>B元素后面的拥有共同父元素的兄弟元素E</td>
</tr>
</tbody>
</table>
<h2 id="实例：使用基于关系的选择器和伪类选择器"><a href="#实例：使用基于关系的选择器和伪类选择器" class="headerlink" title="实例：使用基于关系的选择器和伪类选择器"></a>实例：使用基于关系的选择器和伪类选择器</h2><p>通过使用基于关系的选择器和伪类选择器，你可以构造出复杂的叠加算法。这是一个常用的技巧，比如可以用来创建纯CSS无JavaScript的下拉菜单（pure-CSS dropdown menus）。关键点就是创建下面这类规则：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-class">.menu-bar</span> <span class="selector-tag">ul</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.menu-bar</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后将这些规则应用到下面的HTML结构中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"menu-bar"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Menu<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"menu-nav"</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Submenu<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"menu-nav"</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Submenu<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"example.html"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="http://tanhanjay.github.io/src/纯CSS无JavaScript的下拉菜单.html" target="_blank" rel="external">演示</a></p>
<h1 id="Content-内容"><a href="#Content-内容" class="headerlink" title="Content(内容)"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Getting_started/Content" target="_blank" rel="external">Content(内容)</a></h1><p>在样式中可以定义文本内容和图片内容。当内容与文档结构紧密相关的时候，你可以在样式表中指定内容。</p>
<h4 id="更多细节"><a href="#更多细节" class="headerlink" title="更多细节"></a>更多细节</h4><ul>
<li>在样式表中指定内容会使事情变得复杂：你可能有多个语言版本的文档共享同一个样式表。如果样式表的一部分需要翻译，这就意味着你需要将这部分单独保存在多个样式表中，并在不同语言的文档中引用。</li>
</ul>
<ul>
<li>如果你指定的内容由通用符号和图片组成的话，就不存在这个问题。</li>
</ul>
<ul>
<li>样式表中指定的内容不会成为DOM的一部分。</li>
</ul>
<h3 id="文本内容"><a href="#文本内容" class="headerlink" title="文本内容"></a>文本内容</h3><p>CSS只可以在元素的前后插入文本：在选择器的后面加上`    :before 或者 · :after。在声明中，指定content属性，并设置文本内容。</p>
<h4 id="更多细节-1"><a href="#更多细节-1" class="headerlink" title="更多细节"></a>更多细节</h4><ul>
<li>样式表默认使用UTF-8字符集。也可以通过link属性或样式表以及其他方式指定。 参见 CSS规范中<a href="http://www.w3.org/TR/CSS21/syndata.html#q23" target="_blank" rel="external">4.4 CSS style sheet representation</a></li>
</ul>
<ul>
<li>还可以通过转义机制（通过反斜杠转义）指定单个字符。比如， \265B 是国际象棋黑皇后的符号 ♛。更多参见 <a href="http://www.w3.org/TR/CSS21/syndata.html#q24" target="_blank" rel="external">Referring to characters not represented in a character encoding </a>和CSS规范中的<a href="http://www.w3.org/TR/CSS21/syndata.html#q6" target="_blank" rel="external"> Characters and case。</a></li>
</ul>
<h1 id="List中的counter-计数器"><a href="#List中的counter-计数器" class="headerlink" title="List中的counter(计数器)"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Getting_started/Lists#计数器" target="_blank" rel="external">List中的counter</a>(计数器)</h1><p><strong>注意:  一些浏览器不支持计数器。Quirks Mode site 的CSS contents and browser compatibility 页有更多这方面的兼容表格可以参考。 CSS Reference 也有浏览器兼容性表格。</strong></p>
<p>你可以用计数器来计数任何元素，不仅是列表元素。比如，在某些文档中你可能想计数标题和段落。</p>
<p>要想计数，你必须定义一个计数器。</p>
<p>在计数开始前的某个元素上，设置 counter-reset属性以重置计数器。被计数元素的父节点是一个不错的选择。当然，任何出现在被计数元素前面的元素都可以。</p>
<p>设置每个需要计数的元素的counter-increment 属性为你的计数器名。</p>
<p>通过为选择器增加 :before 或 :after 并设置 content 属性来显示计数器。 (如上一节所示, 内容).</p>
<p>在content属性的值中设置 counter()，在括号内填上计数器的名字。可选的是设置计数器类型。其类型和前面一节 有序列表 中相同。</p>
<p>正常情况下，显示计数器的元素也会递增计数器。</p>
<p>例<br>这条规则会为每个类名中包含numbered的</p><h3> 元素初始化计数器 mynum：<p></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h3</span><span class="selector-class">.numbered</span> &#123;<span class="attribute">counter-reset</span>: mynum;&#125;</span><br></pre></td></tr></table></figure>
<p>这条规则为每个类名包含numbered的</p><p>元素显示并递增计数器：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-class">.numbered</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">counter</span>(mynum) <span class="string">": "</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">counter-increment</span>: mynum;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">font-weight</span>: bold;&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<p>Heading<br>1: Lorem ipsum</p>
<p>2: Dolor sit</p>
<p>3: Amet consectetuer</p>
<p>4: Magna aliquam</p>
<p>5: Autem veleum</p>
<h4 id="更多细节-2"><a href="#更多细节-2" class="headerlink" title="更多细节"></a>更多细节</h4><ul>
<li>除非所有看你文档的人的浏览器都支持计数器，否则你不能使用计数器。</li>
</ul>
<ul>
<li>如果你可以使用计数器，那么你可以单独设置计数器的样式。如上面例子所示：计数器是粗体，但列表不是。</li>
</ul>
<ul>
<li>你还可以用更复杂的方式使用计数器。比如，计数章节, 标题, 子标题以及段落。详见CSS规范中的 <a href="http://www.w3.org/TR/CSS21/generate.html#counters" target="_blank" rel="external">Automatic counters and numbering </a>。</li>
</ul>
</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="tanhanjay.top/2016/03/27/MDN-CSS入门教程学习笔记/" data-id="cimblvnsf0005flz320mjbtuo" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-常用的终端(Terminal)命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/26/常用的终端(Terminal)命令/" class="article-date">
  <time datetime="2016-03-25T16:00:00.000Z" itemprop="datePublished">2016-03-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/unix-linux/">unix/linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/26/常用的终端(Terminal)命令/">常用的终端（Terminal）命令（适用于Mac OSX）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Mac查看端口占用情况"><a href="#Mac查看端口占用情况" class="headerlink" title="Mac查看端口占用情况"></a>Mac查看端口占用情况</h3><p>命令 lsof -i tcp:port  （port替换成端口号，比如6379）可以查看该端口被什么程序占用，并显示PID，方便KILL</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="tanhanjay.top/2016/03/26/常用的终端(Terminal)命令/" data-id="cimblvns10001flz3o6s9cots" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript Bad Parts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/25/JavaScript Bad Parts/" class="article-date">
  <time datetime="2016-03-24T16:00:00.000Z" itemprop="datePublished">2016-03-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/25/JavaScript Bad Parts/">JavaScript Bad Parts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>本文摘自《JavaScript The Good Parts》中文版</p>
</blockquote>
<h3 id=""><a href="#" class="headerlink" title="=="></a>==</h3><p>JavaScript有两组相等运算符：===和！==，以及它们邪恶的孪生兄弟==和！=。===和！==这一组运算符会按照你期望的方式工作。如果两个运算数类型一致且拥有相同的值，那么===返回true，!==会返回false。而它们邪恶的孪生兄弟只有在两个运算数类型一致时才会做出正确的判断，如果两个运算数是不同的类型，它们试图去强制转换值得类型。转换的规则复杂且难以记忆。这里有一些有趣的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''</span> == <span class="string">'0'</span>  			<span class="comment">//false</span></span><br><span class="line"><span class="number">0</span> == <span class="string">''</span> 			<span class="comment">//true</span></span><br><span class="line"><span class="number">0</span> == <span class="string">'0'</span>			<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="literal">false</span> == <span class="string">'false'</span>	<span class="comment">//false</span></span><br><span class="line"><span class="literal">false</span> == <span class="string">'0'</span>		<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="literal">false</span> == <span class="literal">undefined</span> 	<span class="comment">//false</span></span><br><span class="line"><span class="literal">false</span> == <span class="literal">null</span>		<span class="comment">//false</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span> 	<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="string">' \t\r\n '</span> == <span class="number">0</span>		<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>==运算符对传递性的缺乏值得我们警惕。我的建议是永远不要使用那对邪恶的孪生兄弟。相反，请始终使用===和!==。如果以上所有的比较使用 === 运算符，结果都是false。</p>
<h3 id="with语句"><a href="#with语句" class="headerlink" title="with语句"></a>with语句</h3><p>JavaScript提供了一个with语句，本意是想用它来快捷地访问对象的属性。不幸的是，它的结果可能有时不可预料，所以应该避免使用它。</p>
<p>下面的语句：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span>(obj)&#123;</span><br><span class="line">  a = b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和下面的代码做的是同样的事情：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(obj.a === <span class="literal">undefined</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="tanhanjay.top/2016/03/25/JavaScript Bad Parts/" data-id="cimblvns60002flz3d3cg7ld9" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript的毒瘤" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/20/JavaScript的毒瘤/" class="article-date">
  <time datetime="2016-03-19T16:00:00.000Z" itemprop="datePublished">2016-03-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/20/JavaScript的毒瘤/">JavaScript语言的毒瘤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JavaScript语言的毒瘤"><a href="#JavaScript语言的毒瘤" class="headerlink" title="JavaScript语言的毒瘤"></a>JavaScript语言的毒瘤</h1><h3 id="自动插入分号"><a href="#自动插入分号" class="headerlink" title="自动插入分号"></a>自动插入分号</h3><p>JavaScript有一个自动修复机制，它试图通过自动插入分号来修正有缺损的程序。但是，千万不要指望它，它可能会掩盖更为严重的错误。<br>有时它会不合时宜地插入分号。请考虑在return语句中自动插入分号导致的后果。如果一个return语句返回一个值，这个值表达式的开始部分必须和return位于同一行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span></span><br><span class="line">    &#123;</span><br><span class="line">      status:<span class="literal">true</span></span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>这看起来是要返回一个包含status成员元素的对象。遗憾的是，自动插入分号让它变成了返回undefined。自动插入分号导致程序被误解，却没有任何警告提醒。如果把{放在上一行的尾部而不是下一行的头部就可以避免该问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  status: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h3><p>下面的单词在JavaScript里被保留：<br>abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends false final finally float for function goto if implements import in instanceof int interface long native new null package private protected public return short static super switch synchronized this throw throws transient true try typeof var volatile void while with</p>
<p>这些单词中的大多数并没有在语言中使用。<br>它们不能被用来命名变量或参数。当保留字被用作对象字面量的键值时，它们必须被引号括起来。它们不能被用在点表示法中，所以有时必须使用括号表示法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> method;                   <span class="comment">//ok</span></span><br><span class="line"><span class="keyword">var</span> <span class="class"><span class="keyword">class</span></span>;                    <span class="comment">//非法</span></span><br><span class="line">object = &#123;box: value&#125;;        <span class="comment">//ok</span></span><br><span class="line">object = &#123;<span class="keyword">case</span>: value&#125;;       <span class="comment">//非法</span></span><br><span class="line">object = &#123;<span class="string">'case'</span>: value&#125;;     <span class="comment">//ok</span></span><br><span class="line">object.box = value;           <span class="comment">//ok</span></span><br><span class="line">object.case = value;          <span class="comment">//非法</span></span><br><span class="line">object[<span class="string">'case'</span>] = value;       <span class="comment">//ok</span></span><br></pre></td></tr></table></figure>
<h3 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h3><p>typeof 运算符返回一个用于识别其运算数类型的字符串。所以：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typeof 98.6</span><br></pre></td></tr></table></figure>
<p>返回‘number’。遗憾的是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typeof null</span><br></pre></td></tr></table></figure>
<p>返回’object’而不是’null’。这简直太糟糕了。其实，有更简单也更好的检测null的方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_value === null</span><br></pre></td></tr></table></figure>
<p>一个更大的问题是检测对象的值。typeof不能辨识出null于对象，但你可以下面这样做，因为null值为假，而所有对象值为真：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (my_value &amp;&amp; <span class="keyword">typeof</span> === <span class="string">'object'</span>) &#123;</span><br><span class="line">  <span class="comment">// my_value 是一个对象或数组！</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>相关的内容，请参阅后面的小节”NaN”和“伪数组”。</p>
<p>在对正则表达式的类型识别上，各种JavaScript的实现不太一致。对于下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> /a/</span><br></pre></td></tr></table></figure>
<p>一些实现会返回’object’,而其他的返回’function’。如果返回’regexp’可能会更有用些，但标准不允许这么做。</p>
<h3 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h3><p>NaN 是IEEE754中定义的一个特殊的数量值。它表示的不是一个数字，尽管下面的表达式返回的是true:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">NaN</span> === <span class="string">'number'</span> <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>该值可能会在试图把非数字形式的字符串转换为数字时产生。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ <span class="string">'0'</span> <span class="comment">//0</span></span><br><span class="line">+ <span class="string">'oops'</span> <span class="comment">//NaN</span></span><br></pre></td></tr></table></figure>
<p>如果NaN是数学运算中的一个运算数，那么结果就是NaN。所以，如果你有一个公式链产生出NaN的结果，那肯定要么其中一个输入项是NaN，要么在某个地方产生了NaN。</p>
<p>你可以对NaN进行检测。正如我们之前所见，typeof不能辨别数字和NaN，而且NaN也不等同于它自己。所以，下面的代码结果令人惊讶：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span> <span class="comment">//false</span></span><br><span class="line"><span class="literal">NaN</span> !== <span class="literal">NaN</span> <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>JavaScript 提供了一个isNaN函数，可以辨别数字与NaN:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isNaN</span>(<span class="literal">NaN</span>)		<span class="comment">//true</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="number">0</span>)		<span class="comment">//false</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">'oops'</span>)	<span class="comment">//true</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">'0'</span>)		<span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>判断一个值是否可用做数字的最佳方法是使用isFinite函数，因为它会筛除掉NaN和Infinity。遗憾的是isFinite会试图把它的运算数转换成一个数字，所以，如果值事实上不是一个数字，它就不是一个好的测试。你可以这样定义自己的isNumber函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isNumber = <span class="function"><span class="keyword">function</span> <span class="title">isNumber</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">'number'</span> &amp;&amp; <span class="built_in">isFinite</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="伪数组"><a href="#伪数组" class="headerlink" title="伪数组"></a>伪数组</h3><p>JavaScript没有真正的数组。这也不全是坏事。JavaScript的数组确实非常容易使用。你不必给它们设置维度，而且它们永远不会产生越界（out-of-bounds）错误。但它们的性能相比真正的数组可能相当糟糕。</p>
<p>typeof运算符不能辨别数组和对象。要辨别一个值是否为数组，你还需要检查它的constructor属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(my_value &amp;&amp; <span class="keyword">typeof</span> my_value === <span class="string">'object'</span> &amp;&amp; my_value.constructor === <span class="built_in">Array</span>) &#123;</span><br><span class="line">  	<span class="comment">//my_value是一个数组。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的检测对于在不同帧或窗口创建的数组将会给出false。当数组有可能在其他的帧中被创建时，下面的检测更为可靠：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.toString.apply(my_value) === <span class="string">'[object Array]'</span>)&#123;</span><br><span class="line">  <span class="comment">//my_value 确实是一个数组！</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>arguments数组不是一个数组，它只是一个有着length成员属性的对象。上面的检测会分辨出arguments并不是一个数组。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="tanhanjay.top/2016/03/20/JavaScript的毒瘤/" data-id="cimblvnsc0004flz35ka9dg28" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorieën</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/unix-linux/">unix/linux</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/03/28/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2016/03/27/MDN-CSS入门教程学习笔记/">MDN-CSS入门教程学习笔记</a>
          </li>
        
          <li>
            <a href="/2016/03/26/常用的终端(Terminal)命令/">常用的终端（Terminal）命令（适用于Mac OSX）</a>
          </li>
        
          <li>
            <a href="/2016/03/25/JavaScript Bad Parts/">JavaScript Bad Parts</a>
          </li>
        
          <li>
            <a href="/2016/03/20/JavaScript的毒瘤/">JavaScript语言的毒瘤</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
   
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Teng Haojun<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>